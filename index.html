<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./style.css" />
    <title>我的画板</title>
  </head>
  <body>
    <canvas id="canvas" width="500" height="500"></canvas>

    <script>
      var canvas = document.getElementById("canvas")
      var context = canvas.getContext("2d")
      var paiting=false
      var lastPoint={x:undefined, y:undefined}
      var newPoint={x:undefined, y:undefined}
      canvas.onmousedown=function(a) {
        paiting=true
        var x=a.clientX//这是相对于视口的位置，不是相对于canvas的位置
        var y=a.clientY
        lastPoint={x:x,y:y}
        drawCircle(x,y,3)
      }

      canvas.onmousemove=function(a) {
        if(paiting){
        var x=a.clientX
        var y=a.clientY
        newPoint={x:x,y:y}
        drawCircle(x,y,3)   
        drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y)//  注意要实时更新第一个点的位置
        lastPoint=newPoint// 鼠标只要一动上一个点就变成现在移动到的点
        //只要一移动起点就变成现鼠标移动到的这个点，从而实现连续划线
        //这是最核心的一句话，这个不是api这个是我想出来的，其他都不重要
        }
      }

      canvas.onmouseup=function(a) {
        paiting=false
      }

      function drawCircle(x,y,radius) {
        context.beginPath()
        context.fillStyle="black"
        context.arc(x, y, radius, 0, Math.PI*2)
        context.fill()
      }

      function drawLine(x1,y1,x2,y2) {
        context.beginPath()
        context.strokeStyle="black"
        context.moveTo(x1,y1)//起点
        context.lineWidth=6
        context.lineTo(x2,y2)//终点
        context.stroke()
        context.closePath()
      }
    </script>
  </body>
</html>
